<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TastyAura – Smart Recipe Finder</title>
<style>
  :root {
    --primary-color: #0d47a1; /* header color deep blue */
    --secondary-color: #4caf50;
    --bg-color: #f9fafb;
    --text-color: #555;
    --card-bg: #fff;
    --modal-bg: rgba(0, 0, 0, 0.7);
    --shadow: rgba(0, 0, 0, 0.15);
    --close-color: #e53935;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
  }
  header {
    background: var(--primary-color);
    color: white; padding: 15px 25px;
    display: flex; align-items: center; justify-content: space-between;
  }
  .brand {
    display: flex; align-items: center; gap: 10px;
  }
  .brand img {
    width: 35px; height: 35px; border-radius: 5px;
  }
  header h1 { font-size: 1.6rem; font-weight: 700; }

  .filters {
    display: flex; gap: 8px; flex-grow: 1; max-width: 600px; margin-left: 20px;
  }
  select, input[type="text"] {
    padding: 8px 10px; border-radius: 6px; border: none;
    font-size: 1rem; flex: 1; min-width: 110px;
  }
  input[type="text"] { flex: 2; }
  button#searchBtn {
    background-color: var(--secondary-color); color: white; border: none;
    padding: 8px 14px; border-radius: 6px; font-weight: 600;
    cursor: pointer; transition: background-color 0.3s ease;
  }
  button#searchBtn:hover { background: #3a9440; }

  main { display: flex; padding: 20px 30px; gap: 20px; }
  #recipeContainer {
    flex: 3; display: grid; gap: 20px;
    grid-template-columns: repeat(auto-fill,minmax(220px,1fr));
  }
  .recipe-card {
    background: var(--card-bg); border-radius: 10px; box-shadow: 0 3px 8px var(--shadow);
    overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; display: flex; flex-direction: column;
  }
  .recipe-card:hover { transform: translateY(-6px); box-shadow: 0 8px 16px var(--shadow); }
  .recipe-card img { width: 100%; height: 160px; object-fit: cover; }
  .recipe-content { padding: 15px; flex-grow: 1; }
  h3 { margin-bottom: 10px; font-size: 1.2rem; font-weight: 700; color: #333; }
  .recipe-meta { font-size: .9rem; color: #777; }
  button.show-recipe-btn {
    background: var(--primary-color); color: #fff; border: none;
    padding: 10px; font-size: 1rem; font-weight: bold;
    border-radius: 0 0 10px 10px; cursor: pointer;
  }
  button.show-recipe-btn:hover { background: #08306b; }

  /* Modal */
  .modal {
    position: fixed; display: none; top:0; left:0; width:100%; height:100%;
    background: var(--modal-bg); justify-content: center; align-items: center; z-index: 1000;
  }
  .modal.active { display: flex; }
  #modalContent {
    background:#fff; border-radius: 10px; max-width: 480px; max-height: 85vh;
    padding: 20px 25px; overflow-y: auto; box-shadow: 0 8px 20px var(--shadow);
  }

  /* Order Sidebar */
  aside#orderList {
    flex:1; background:#fff; border-radius: 10px; padding: 20px; box-shadow: 0 6px 15px var(--shadow);
    max-height: 70vh; overflow-y: auto; position: sticky; top: 80px;
  }
  aside#orderList h2 {
    margin-top:0; color: var(--primary-color); font-size:1.4rem; margin-bottom:12px;
    display: flex; justify-content: space-between; align-items: center;
  }
  #orderCloseBtn {
    background: var(--close-color); border: none; color: #fff; font-weight: bold;
    border-radius: 50%; width: 24px; height: 24px; cursor: pointer;
  }
  #orderCloseBtn:hover { background: #b71c1c; }
  #orderedItems { list-style: none; margin:0; padding:0; }
  #orderedItems li {
    margin-bottom:10px; padding: 8px 10px; background:#f1f8e9; border-radius: 6px;
    font-weight:600; color: #33691e; box-shadow: inset 0 0 3px #aed581;
    display: flex; justify-content: space-between; align-items: center;
  }
  .close-item {
    background: var(--close-color); border:none; color:#fff; border-radius:50%;
    width:22px; height:22px; cursor:pointer; line-height:1;
  }
  .close-item:hover { background:#c62828; }

  /* Toast Notification */
  #toast {
    visibility: hidden; min-width: 220px; margin-left:-110px;
    background: #388e3c; color: #fff; text-align: center; border-radius: 6px;
    padding: 12px; position: fixed; z-index: 1500; left: 50%; bottom: 30px;
    font-weight: 600;
  }
  #toast.show {
    visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s;
  }
  @keyframes fadein { from {bottom:0; opacity:0;} to{bottom:30px; opacity:1;} }
  @keyframes fadeout { from {bottom:30px; opacity:1;} to{bottom:0; opacity:0;} }

  @media(max-width:900px){
    main{ flex-direction: column; }
    aside#orderList{ position:relative; max-height:none; margin-top:20px; }
  }
</style>
</head>
<body>
  <header>
    <div class="brand">
      <img src="https://cdn-icons-png.flaticon.com/512/857/857681.png" alt="Logo">
      <h1>TastyAura – Smart Recipe Finder</h1>
    </div>
    <div class="filters">
      <select id="categorySelect"><option value="">All Categories</option></select>
      <select id="areaSelect"><option value="">All Cuisines</option></select>
      <input type="text" id="searchInput" placeholder="Search recipes..."/>
      <button id="searchBtn">Find</button>
    </div>
  </header>

  <main>
    <section id="recipeContainer"></section>
    <aside id="orderList" style="display:none;">
      <h2>Your Order List <button id="orderCloseBtn">&times;</button></h2>
      <ul id="orderedItems"></ul>
    </aside>
  </main>

  <div id="recipeModal" class="modal">
    <div id="modalContent"></div>
    <button id="closeBtn">Close</button>
    <button id="orderBtn">Order Ingredients</button>
  </div>

  <!-- Toast -->
  <div id="toast">Ingredients added to your order!</div>

<script>
  const apiUrl = 'https://www.themealdb.com/api/json/v1/1/search.php?s=';
  let modalIngredients = [];

  // Category + Area
  fetch('https://www.themealdb.com/api/json/v1/1/list.php?c=list').then(r=>r.json()).then(d=>{
    const catSel=document.getElementById('categorySelect');
    d.meals.map(c=>c.strCategory).forEach(c=>{ let o=document.createElement('option'); o.value=c;o.textContent=c; catSel.appendChild(o); });
  });
  fetch('https://www.themealdb.com/api/json/v1/1/list.php?a=list').then(r=>r.json()).then(d=>{
    const areaSel=document.getElementById('areaSelect');
    d.meals.map(a=>a.strArea).forEach(a=>{ let o=document.createElement('option'); o.value=a;o.textContent=a; areaSel.appendChild(o); });
  });

  document.getElementById('searchBtn').addEventListener('click', performSearch);
  document.getElementById('categorySelect').addEventListener('change', performSearch);
  document.getElementById('areaSelect').addEventListener('change', performSearch);
  document.getElementById('orderCloseBtn').addEventListener('click', ()=>document.getElementById('orderList').style.display="none");

  document.addEventListener('click', e=>{
    if(e.target.classList.contains('show-recipe-btn')) openModal(e.target.dataset.id);
    if(e.target.id==="closeBtn") closeModal();
    if(e.target.id==="orderBtn") addOrder();
  });

  function performSearch(){
    const kw=document.getElementById('searchInput').value.trim();
    const cat=document.getElementById('categorySelect').value;
    const area=document.getElementById('areaSelect').value;
    if(area) fetchArea(area,cat,kw);
    else if(cat) fetchCategory(cat,kw);
    else if(kw) fetchByName(kw);
    else fetchByName('chicken');
  }
  function fetchByName(name){ fetch(`${apiUrl}${encodeURIComponent(name)}`).then(r=>r.json()).then(d=> d.meals?displayRecipes(d.meals):noRecipes() ); }
  function fetchCategory(c,kw){ fetch(`https://www.themealdb.com/api/json/v1/1/filter.php?c=${encodeURIComponent(c)}`).then(r=>r.json()).then(d=>{
    let m=d.meals||[]; if(kw) m=m.filter(x=>x.strMeal.toLowerCase().includes(kw.toLowerCase())); m.length?displayRecipes(m):noRecipes();
  }); }
  function fetchArea(a,cat,kw){ fetch(`https://www.themealdb.com/api/json/v1/1/filter.php?a=${encodeURIComponent(a)}`).then(r=>r.json()).then(d=>{
    let m=d.meals||[];
    if(cat){ Promise.all(m.map(x=>fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${x.idMeal}`).then(r=>r.json()).then(d=>d.meals[0])))
      .then(full=>{ let f=full.filter(x=>x.strCategory===cat); if(kw) f=f.filter(x=>x.strMeal.toLowerCase().includes(kw.toLowerCase())); f.length?displayRecipes(f):noRecipes(); }); }
    else { if(kw) m=m.filter(x=>x.strMeal.toLowerCase().includes(kw.toLowerCase())); m.length?displayRecipes(m):noRecipes(); }
  }); }

  function displayRecipes(recipes){
    const c=document.getElementById('recipeContainer'); c.innerHTML='';
    recipes.slice(0,30).forEach(r=>{
      const div=document.createElement('div'); div.className='recipe-card';
      div.innerHTML=`<img src="${r.strMealThumb}" alt="${r.strMeal}"><div class="recipe-content"><h3>${r.strMeal}</h3>${r.strCategory?`<p class='recipe-meta'>${r.strCategory}</p>`:''}</div><button class="show-recipe-btn" data-id="${r.idMeal}">Details</button>`;
      c.appendChild(div);
    });
  }
  function noRecipes(){ document.getElementById('recipeContainer').innerHTML='<p>No recipes found.</p>'; }

  const modal=document.getElementById('recipeModal'); const modalContent=document.getElementById('modalContent');
  function openModal(id){
    modalContent.innerHTML='<p>Loading...</p>'; modal.classList.add('active'); modalIngredients=[];
    fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`).then(r=>r.json()).then(d=>{
      const r=d.meals[0]; let ing="<h3>Ingredients</h3><ul>";
      for(let i=1;i<=20;i++){ let ingName=r[`strIngredient${i}`]; let meas=r[`strMeasure${i}`];
        if(ingName&&ingName.trim()){ ing+=`<li>${meas?`<strong>${meas}</strong>`:''} ${ingName}</li>`; modalIngredients.push(meas?`${meas.trim()} ${ingName.trim()}`:ingName.trim()); } }
      ing+="</ul>";
      modalContent.innerHTML=`<h2>${r.strMeal}</h2><p><strong>Category:</strong> ${r.strCategory} | <strong>Cuisine:</strong> ${r.strArea}</p>${ing}<h3>Instructions</h3><p>${r.strInstructions.split('\r\n').filter(l=>l.trim()).join('<br>')}</p>`;
    });
  }
  function closeModal(){ modal.classList.remove('active'); }

  function addOrder(){
    if(!modalIngredients.length) return;
    const ol=document.getElementById('orderList'); const ul=document.getElementById('orderedItems');
    modalIngredients.forEach(ing=>{
      if(!Array.from(ul.children).some(li=>li.textContent.includes(ing))){
        const li=document.createElement('li'); li.textContent=ing;
        const btn=document.createElement('button'); btn.textContent="×"; btn.className="close-item"; btn.onclick=()=>li.remove();
        li.appendChild(btn); ul.appendChild(li);
      }
    });
    ol.style.display='block'; showToast(); closeModal();
  }

  // Toast Logic
  function showToast(){
    const toast=document.getElementById("toast");
    toast.className="show";
    setTimeout(()=>{ toast.className=toast.className.replace("show",""); }, 3000);
  }

  // Initial load
  fetchArea('Indian');
</script>
</body>
</html>

